<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>CarShop - Trang ch·ªß</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding-top: 60px; }

    /* Th∆∞∆°ng hi·ªáu n·ªïi b·∫≠t */
    .navbar-brand {
      font-size: 1.6rem;
      font-weight: 700;
      letter-spacing: 0.6px;
      color: #fff !important;
      text-shadow: 0 2px 6px rgba(0,0,0,0.45);
    }

  /* Carousel */
  .carousel { height: 350px; }
  .carousel-item img { height: 350px; object-fit: cover; }
  .carousel-caption { bottom: 20px; }
  .carousel-caption h5 { font-size: 2rem; font-weight: bold; text-shadow: 2px 2px 8px rgba(0,0,0,0.7); }
  .carousel-caption p { font-size: 1.2rem; text-shadow: 2px 2px 8px rgba(0,0,0,0.7); }

  /* S·∫£n ph·∫©m */
  .product-card img { width: 100%; height: 200px; object-fit: cover; transition: transform 0.25s ease, box-shadow 0.25s ease; }
  .product-card:hover img { transform: translateY(-6px) scale(1.03); box-shadow: 0 12px 30px rgba(0,0,0,0.18); }

  /* Form ƒëƒÉng nh·∫≠p nh·ªè g√≥c tr√°i d∆∞·ªõi: s√°t m√©p d∆∞·ªõi-tr√°i */
    #loginFormContainer {
      position: fixed;
      bottom: 0; /* s√°t d∆∞·ªõi */
      left: 0;   /* s√°t tr√°i */
      width: 260px;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      transition: all 0.35s ease;
      border-radius: 8px 8px 0 0;
      margin: 0;
      overflow: visible;
    }

  /* N√∫t ƒëƒÉng nh·∫≠p n·ªïi (g√≥c tr√°i d∆∞·ªõi) */
    #loginIconBtn {
      position: fixed;
      bottom: 12px;
      left: 12px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background-color: #198754;
      color: #fff;
      border: none;
      z-index: 1100;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      cursor: pointer;
    }

    #loginIconBtn:hover { filter: brightness(0.95); }

  /* N√∫t thu nh·ªè n·∫±m trong khung ƒëƒÉng nh·∫≠p (g√≥c tr√™n ph·∫£i c·ªßa panel) */
    #toggleLoginBtn {
      position: absolute;
      top: 8px;
      right: 8px;
      background: transparent;
      color: #198754;
      border: 2px solid #198754;
      border-radius: 6px;
      padding: 0 8px;
      line-height: 1.6;
      font-size: 16px;
      cursor: pointer;
      z-index: 1200;
    }

    #toggleLoginBtn:hover { background: rgba(25,135,84,0.08); }

  /* ·∫®n n√∫t thu nh·ªè khi panel ƒëang ·ªü tr·∫°ng th√°i thu nh·ªè */
  #loginFormContainer.minimized #toggleLoginBtn { display: none; }

    /* ·∫®n form khi thu nh·ªè */
    #loginFormContainer.minimized form {
      display: none;
    }

  /* T·∫°o kho·∫£ng tr·ªëng ph√≠a tr√™n form ƒë·ªÉ kh√¥ng che n√∫t thu nh·ªè */
  #loginFormContainer form { padding-top: 30px; }

    /* ·∫¢nh bay v√†o gi·ªè */
    .fly-img {
      position: absolute;
      width: 80px;
      height: 80px;
      object-fit: cover;
      z-index: 2000;
      transition: all 1s ease-in-out;
      pointer-events: none;
      border-radius: 50%;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      opacity: 1;
    }

    /* Icon MXH trong footer */
    footer a img {
      transition: transform 0.3s, box-shadow 0.3s;
    }
    footer a img:hover {
      transform: scale(1.1);
      box-shadow: 0 0 10px rgba(255,255,255,0.6);
    }

    /* üìå Menu x·ªï xu·ªëng cƒÉn ph·∫£i khi ·ªü mobile */
    @media (max-width: 991px) {
      .navbar-collapse { text-align: right; }
      .navbar-nav { margin-left: auto; align-items: flex-end; }
      .navbar-nav .nav-item { width: 100%; text-align: right; }
    }
    /* Snackbar (th√¥ng b√°o d∆∞·ªõi c√πng) */
    .snackbar { position: fixed; left: 50%; transform: translateX(-50%); bottom: 20px; background: rgba(20,20,20,0.95); color: #fff; padding: 10px 14px; border-radius: 8px; display: flex; gap: 12px; align-items: center; box-shadow: 0 8px 24px rgba(0,0,0,0.3); opacity: 0; pointer-events: none; transition: opacity 0.25s ease, transform 0.25s ease; z-index: 3000; }
    .snackbar.show { opacity: 1; pointer-events: auto; transform: translateX(-50%) translateY(0); }
    .snackbar .btn-sb { background: transparent; border: 1px solid rgba(255,255,255,0.12); color: #fff; padding: 6px 10px; border-radius: 6px; cursor: pointer; }
  </style>
</head>
<body>
  <!-- Thanh ƒëi·ªÅu h∆∞·ªõng (Navbar) -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">CarShop</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!-- menu ƒë·∫©y sang ph·∫£i -->
      <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <ul class="navbar-nav align-items-center">
          <li class="nav-item"><a class="nav-link active" href="#">Trang ch·ªß</a></li>
          <li class="nav-item"><a class="nav-link" href="product.html">S·∫£n ph·∫©m</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">Li√™n h·ªá</a></li>
          <li class="nav-item position-relative">
            <a class="nav-link" href="cart.html">Gi·ªè h√†ng üõí</a>
            <span id="cartCount" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">0</span>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Carousel -->
  <div id="carouselExample" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img src="/images/banner.jpg" class="d-block w-100" alt="Banner 1" style="height: 350px; object-fit: cover;">
        <div class="carousel-caption d-none d-md-block">
          <h5>Sky Blue CarShop</h5>
          <p>Ch√†o m·ª´ng ƒë·∫øn v·ªõi th·∫ø gi·ªõi xe h∆°i cao c·∫•p</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="/images/lambor1.jpg" class="d-block w-100" alt="Banner 2" style="height: 350px; object-fit: cover;">
        <div class="carousel-caption d-none d-md-block">
          <h5>Lamborghini</h5>
          <p>Si√™u xe hi·ªáu su·∫•t cao</p>
        </div>
      </div>
      <div class="carousel-item">
        <img src="/images/ferrari1.jpg" class="d-block w-100" alt="Banner 3" style="height: 350px; object-fit: cover;">
        <div class="carousel-caption d-none d-md-block">
          <h5>Ferrari</h5>
          <p>Th∆∞∆°ng hi·ªáu xe th·ªÉ thao h√†ng ƒë·∫ßu</p>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="visually-hidden">Next</span>
    </button>
  </div>

  <!-- Form ƒëƒÉng nh·∫≠p nh·ªè g√≥c tr√°i d∆∞·ªõi -->
  <div id="loginFormContainer" class="minimized">
    <button id="toggleLoginBtn">‚àí</button>
    <form id="loginForm" class="border p-3 rounded bg-light">
      <h6>ƒêƒÉng nh·∫≠p</h6>
      <input type="email" id="loginEmail" class="form-control mb-2" placeholder="Email" required>
      <input type="password" id="loginPassword" class="form-control mb-2" placeholder="M·∫≠t kh·∫©u" required>
      <button type="submit" class="btn btn-success w-100">ƒêƒÉng nh·∫≠p</button>
    </form>
  </div>

  <!-- N√∫t ƒëƒÉng nh·∫≠p n·ªïi (k√≠ch ho·∫°t form) -->
  <button id="loginIconBtn" aria-label="M·ªü ƒëƒÉng nh·∫≠p">üîí</button>

  <!-- Danh s√°ch s·∫£n ph·∫©m -->
  <div class="container my-5" id="productsSection">
    <h2 class="text-center mb-4">S·∫£n ph·∫©m n·ªïi b·∫≠t</h2>
    <div class="row g-4" id="productList"></div>
  </div>

  <!-- Footer -->
  <footer class="bg-dark text-white p-4 mt-5">
    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <h5>Li√™n h·ªá CarShop</h5>
          <p>Email: support@carshop.vn</p>
          <p>Hotline: 0123 456 789</p>
          <p>ƒê·ªãa ch·ªâ: 123 ƒê∆∞·ªùng ABC, TP.HCM</p>
        </div>
        <div class="col-md-6 text-md-end text-center">
          <h5>K·∫øt n·ªëi v·ªõi ch√∫ng t√¥i</h5>
          <div class="d-flex justify-content-md-end justify-content-center gap-2 mt-2">
            <a href="https://youtube.com" target="_blank">
              <img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png" alt="YouTube" width="40" class="rounded-circle p-1 bg-white">
            </a>
            <a href="https://facebook.com" target="_blank">
              <img src="https://cdn-icons-png.flaticon.com/512/1384/1384053.png" alt="Facebook" width="40" class="rounded-circle p-1 bg-white">
            </a>
            <a href="https://instagram.com" target="_blank">
              <img src="https://cdn-icons-png.flaticon.com/512/1384/1384063.png" alt="Instagram" width="40" class="rounded-circle p-1 bg-white">
            </a>
            <a href="https://tiktok.com" target="_blank">
              <img src="https://cdn-icons-png.flaticon.com/512/3046/3046126.png" alt="TikTok" width="40" class="rounded-circle p-1 bg-white">
            </a>
            <a href="https://zalo.me" target="_blank">
              <img src="https://cdn-icons-png.flaticon.com/512/5968/5968841.png" alt="Zalo" width="40" class="rounded-circle p-1 bg-white">
            </a>
          </div>
        </div>
      </div>
      <hr class="border-light">
      <p class="text-center mb-0">&copy; 2025 CarShop - All rights reserved</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // ==============================
  //     üß© DANH S√ÅCH H√ÉNG XE
  // ==============================
  const brands = [
    { key: 'lamborghini', label: 'Lamborghini', img: '/images/logolambor.jpg' },
    { key: 'bugatti', label: 'Bugatti', img: '/images/logobuga.jpg' },
    { key: 'ferrari', label: 'Ferrari', img: '/images/logofera.jpg' },
    { key: 'porche', label: 'Porche', img: '/images/logo-porsche.jpg' },
    { key: 'mercedes', label: 'Mercedes', img: '/images/logomec.jpg' },
    { key: 'audi', label: 'Audi', img: '/images/logoaudi.jpg' },
  ];

  const productList = document.getElementById("productList");
  brands.forEach(b => {
    productList.innerHTML += `
      <div class="col-md-4">
        <a href="product.html?brand=${encodeURIComponent(b.key)}" class="text-decoration-none text-dark">
          <div class="card product-card">
            <img src="${b.img}" alt="${b.label}" class="card-img-top">
            <div class="card-body text-center">
              <h5 class="card-title">${b.label}</h5>
            </div>
          </div>
        </a>
      </div>`;
  });

  // ==============================
  //         üõí GI·ªé H√ÄNG
  // ==============================
  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const count = cart.reduce((acc, item) => acc + item.quantity, 0);
    const el = document.getElementById("cartCount");
    if (el) el.textContent = count;
  }

  // Hi·ªáu ·ª©ng s·∫£n ph·∫©m bay v√†o gi·ªè h√†ng
  function flyToCart(imgEl) {
    const cartIcon = document.querySelector(".nav-link[href='cart.html']");
    if (!cartIcon) return;

    const rectImg = imgEl.getBoundingClientRect();
    const rectCart = cartIcon.getBoundingClientRect();

    const flyImg = imgEl.cloneNode(true);
    flyImg.classList.add("fly-img");
    document.body.appendChild(flyImg);

    flyImg.style.top = rectImg.top + window.pageYOffset + "px";
    flyImg.style.left = rectImg.left + window.pageXOffset + "px";

    requestAnimationFrame(() => {
      flyImg.style.top = rectCart.top + window.pageYOffset + "px";
      flyImg.style.left = rectCart.left + window.pageXOffset + "px";
      flyImg.style.width = "30px";
      flyImg.style.height = "30px";
      flyImg.style.borderRadius = "50%";
      flyImg.style.opacity = "0";
    });

    setTimeout(() => flyImg.remove(), 1000);
  }

  // Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng
  function addToCart(name, price, img) {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    let existing = cart.find(item => item.name === name);
    if (existing) {
      existing.quantity++;
    } else {
      cart.push({ name, price, img, quantity: 1 });
    }
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartCount();
    showSnackbar("ƒê√£ th√™m m·ªôt s·∫£n ph·∫©m v√†o gi·ªè h√†ng");
  }

  updateCartCount();

  // ==============================
  // üë§ TH√äM ICON ƒêƒÇNG K√ù L√äN NAVBAR
  // ==============================
  (function createRegisterNavIcon() {
    // T√¨m v·ªã tr√≠ icon gi·ªè h√†ng ƒë·ªÉ ch√®n k·∫ø b√™n
    const cartNavItem = document.querySelector(".nav-item .nav-link[href='cart.html']");
    if (!cartNavItem) return;
    const cartLi = cartNavItem.closest(".nav-item");
    if (!cartLi) return;

    // T·∫°o th·∫ª li m·ªõi ch·ª©a icon üë§
    const regLi = document.createElement("li");
    regLi.className = "nav-item";
    regLi.style.marginLeft = "8px";

    const a = document.createElement("a");
    a.href = "#";
    a.className = "nav-link";
    a.id = "registerNavBtn";
    a.title = "ƒêƒÉng k√Ω";
    a.textContent = "üë§";
    a.style.fontSize = "20px";

    regLi.appendChild(a);
    // Th√™m v√†o navbar (ngay sau gi·ªè h√†ng)
    if (cartLi.nextSibling) cartLi.parentNode.insertBefore(regLi, cartLi.nextSibling);
    else cartLi.parentNode.appendChild(regLi);

    // T·∫°o khung form ƒëƒÉng k√Ω (·∫©n m·∫∑c ƒë·ªãnh)
    const regForm = document.createElement("div");
    regForm.id = "registerNavForm";
    regForm.style.position = "absolute";
    regForm.style.width = "280px";
    regForm.style.background = "#f8f9fa";
    regForm.style.padding = "12px";
    regForm.style.borderRadius = "8px";
    regForm.style.boxShadow = "0 4px 15px rgba(0,0,0,0.15)";
    regForm.style.display = "none";
    regForm.style.zIndex = "2000";

    // Giao di·ªán form ƒëƒÉng k√Ω
    regForm.innerHTML = `
      <h6 class="text-center mb-2">ƒêƒÉng k√Ω t√†i kho·∫£n</h6>
      <input id="navRegEmail" class="form-control mb-2" placeholder="Email" type="email">
      <input id="navRegPass" class="form-control mb-2" placeholder="M·∫≠t kh·∫©u" type="password">
      <div class="d-flex gap-2">
        <button id="navRegSubmit" class="btn btn-primary w-100">ƒêƒÉng k√Ω</button>
        <button id="navRegClose" class="btn btn-secondary w-100">ƒê√≥ng</button>
      </div>
    `;
    document.body.appendChild(regForm);

    // Khi nh·∫•n icon üë§ ‚Üí m·ªü form ƒëƒÉng k√Ω
    a.addEventListener("click", (e) => {
      e.preventDefault();
      const rect = a.getBoundingClientRect();
      regForm.style.top = rect.bottom + 10 + "px";
      regForm.style.left = rect.left - 200 + "px";
      regForm.style.display = regForm.style.display === "block" ? "none" : "block";
    });

    // N√∫t "ƒê√≥ng"
    regForm.querySelector("#navRegClose").addEventListener("click", () => {
      regForm.style.display = "none";
    });

    // N√∫t "ƒêƒÉng k√Ω"
    regForm.querySelector("#navRegSubmit").addEventListener("click", () => {
      const email = document.getElementById("navRegEmail").value.trim();
      const pass = document.getElementById("navRegPass").value.trim();
      if (!email || !pass) return alert("Vui l√≤ng nh·∫≠p ƒë·ªß th√¥ng tin!");

      const users = JSON.parse(localStorage.getItem("users")) || [];
      if (users.find(u => u.email === email)) {
        alert("Email n√†y ƒë√£ t·ªìn t·∫°i!");
        return;
      }

      users.push({ email, pass });
      localStorage.setItem("users", JSON.stringify(users));
      alert("ƒêƒÉng k√Ω th√†nh c√¥ng! H√£y ƒëƒÉng nh·∫≠p b·∫±ng n√∫t d∆∞·ªõi g√≥c.");
      regForm.style.display = "none";
    });
  })();

  // ==============================
  // üîí QU·∫¢N L√ù ƒêƒÇNG NH·∫¨P / GHI NH·ªö
  // ==============================
  const loginContainer = document.getElementById("loginFormContainer");
  const toggleBtn = document.getElementById("toggleLoginBtn");
  const loginIconBtn = document.getElementById("loginIconBtn");

  // N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p tr∆∞·ªõc ƒë√≥ ‚Üí hi·ªÉn th·ªã l·ªùi ch√†o
  const storedLogged = localStorage.getItem("loggedUser");
  if (storedLogged) {
    showGreeting(storedLogged);
  } else {
    closeLogin();
  }

  // Khi ng∆∞·ªùi d√πng b·∫•m n√∫t ƒëƒÉng nh·∫≠p
  const loginForm = document.getElementById("loginForm");
  loginForm.addEventListener("submit", function(e) {
    e.preventDefault();
    const email = document.getElementById("loginEmail").value.trim();
    const password = document.getElementById("loginPassword").value.trim();

    const users = JSON.parse(localStorage.getItem("users")) || [];
    const found = users.find(u => u.email === email && u.pass === password);

    if (!found) {
      alert("‚ùå Sai t√†i kho·∫£n ho·∫∑c ch∆∞a ƒëƒÉng k√Ω!");
      return;
    }

    // L∆∞u tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
    localStorage.setItem("loggedUser", email);
    showGreeting(email);
    alert("‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng!");
    loginContainer.style.display = "none";
    loginIconBtn.style.display = "none";
    document.getElementById("registerNavBtn").style.display = "none";
  });

  // ==============================
  // üëã HI·ªÇN TH·ªä L·ªúI CH√ÄO & N√öT ƒêƒÇNG XU·∫§T
  // ==============================
  function showGreeting(email) {
    if (document.getElementById("greetingNavItem")) return;

    const navUl = document.querySelector(".navbar-nav");
    const li = document.createElement("li");
    li.className = "nav-item d-flex align-items-center";
    li.id = "greetingNavItem";

    const span = document.createElement("span");
    span.className = "nav-link text-success fw-bold";
    span.id = "greetingText";
    span.textContent = `Xin ch√†o, ${email.split("@")[0]} üëã`;

    const btn = document.createElement("button");
    btn.id = "logoutBtn";
    btn.className = "btn btn-outline-light btn-sm ms-2";
    btn.textContent = "ƒêƒÉng xu·∫•t";

    li.appendChild(span);
    li.appendChild(btn);
    navUl.appendChild(li);

    // ·∫®n icon ƒëƒÉng nh·∫≠p v√† ƒëƒÉng k√Ω
    loginIconBtn.style.display = "none";
    const rnav = document.getElementById("registerNavBtn");
    if (rnav) rnav.style.display = "none";

    // L·ªùi ch√†o ch·ªâ hi·ªÉn th·ªã 3 gi√¢y r·ªìi ·∫©n
    setTimeout(() => {
      const g = document.getElementById("greetingText");
      if (g) g.style.display = "none";
    }, 3000);

    // Khi b·∫•m "ƒêƒÉng xu·∫•t"
    btn.addEventListener("click", () => {
      localStorage.removeItem("loggedUser");
      li.remove();
      loginIconBtn.style.display = "flex";
      if (rnav) rnav.style.display = "inline-flex";
      alert("B·∫°n ƒë√£ ƒëƒÉng xu·∫•t!");
    });
  }

  // ==============================
  // üì¶ SNACKBAR (TH√îNG B√ÅO NG·∫ÆN)
  // ==============================
  function showSnackbar(message) {
    const sb = document.getElementById('snackbar');
    if (!sb) return;
    const msg = sb.querySelector('.sb-msg');
    msg.textContent = message;
    sb.classList.add('show');
    clearTimeout(window._sbTimer);
    window._sbTimer = setTimeout(() => sb.classList.remove('show'), 3500);
  }

  // ==============================
  // üîò N√öT M·ªû/ƒê√ìNG FORM ƒêƒÇNG NH·∫¨P
  // ==============================
  function openLogin() {
    loginContainer.classList.remove('minimized');
    loginContainer.style.bottom = '12px';
    loginIconBtn.style.display = 'none';
    toggleBtn.textContent = '‚àí';
  }

  function closeLogin() {
    loginContainer.classList.add('minimized');
    loginContainer.style.bottom = '0';
    loginIconBtn.style.display = 'flex';
    toggleBtn.textContent = '+';
  }

  if (toggleBtn) {
    toggleBtn.addEventListener("click", function() {
      if (loginContainer.classList.contains('minimized')) openLogin(); else closeLogin();
    });
  }
  if (loginIconBtn) {
    loginIconBtn.addEventListener('click', function() { openLogin(); });
  }

  // ==============================
  // üîí ·∫®N FORM ƒêƒÇNG K√ù KHI NH·∫§N RA NGO√ÄI
  // ==============================
  document.addEventListener('click', function(e) {
    const regForm = document.getElementById('registerNavForm');
    const regBtn = document.getElementById('registerNavBtn');
    if (!regForm || !regBtn) return;
    if (regForm.style.display === 'block') {
      if (!regForm.contains(e.target) && e.target !== regBtn) {
        regForm.style.display = 'none';
      }
    }
  });
</script>


  <!-- Snackbar th√¥ng b√°o -->
  <div id="snackbar" class="snackbar" role="status" aria-live="polite">
    <div class="sb-msg">ƒê√£ th√™m m·ªôt s·∫£n ph·∫©m v√†o gi·ªè h√†ng</div>
    <button id="viewCartBtn" class="btn-sb">Xem gi·ªè h√†ng</button>
  </div>
</body>
</html>
